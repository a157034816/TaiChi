<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:validationRules="clr-namespace:TaiChi.Wpf.NodeEditor.Controls.ValidationRules">

    <!-- 默认回退模板：仅显示占位文本 -->
    <DataTemplate x:Key="DefaultPinInputValueTemplate">
        <!-- <TextBlock Text="未连接" -->
        <!--            Opacity="0.6" -->
        <!--            VerticalAlignment="Center" /> -->
    </DataTemplate>

    <!-- string 类型：未连接时显示可编辑文本框，双向绑定到 Pin.Value -->
    <DataTemplate x:Key="DefaultPinStringInputTemplate">
        <TextBox Text="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                 MinWidth="80"
                 VerticalAlignment="Center" />
    </DataTemplate>

    <!-- int 类型：整数输入控件，双向绑定到 Pin.Value -->
    <DataTemplate x:Key="DefaultPinIntInputTemplate">
        <TextBox MinWidth="60"
                 VerticalAlignment="Center">
            <TextBox.Text>
                <Binding Path="Value" Mode="TwoWay" UpdateSourceTrigger="PropertyChanged">
                    <Binding.ValidationRules>
                        <validationRules:IntValidationRule />
                    </Binding.ValidationRules>
                </Binding>
            </TextBox.Text>
            <TextBox.Style>
                <Style TargetType="TextBox">
                    <Style.Triggers>
                        <Trigger Property="Validation.HasError" Value="True">
                            <Setter Property="BorderBrush" Value="Red"/>
                            <Setter Property="ToolTip"
                                    Value="{Binding RelativeSource={RelativeSource Self}, Path=(Validation.Errors)[0].ErrorContent}"/>
                        </Trigger>
                    </Style.Triggers>
                </Style>
            </TextBox.Style>
        </TextBox>
    </DataTemplate>

    <!-- long 类型：长整数输入控件，双向绑定到 Pin.Value -->
    <DataTemplate x:Key="DefaultPinLongInputTemplate">
        <TextBox MinWidth="80"
                 VerticalAlignment="Center">
            <TextBox.Text>
                <Binding Path="Value" Mode="TwoWay" UpdateSourceTrigger="PropertyChanged">
                    <Binding.ValidationRules>
                        <validationRules:LongValidationRule />
                    </Binding.ValidationRules>
                </Binding>
            </TextBox.Text>
            <TextBox.Style>
                <Style TargetType="TextBox">
                    <Style.Triggers>
                        <Trigger Property="Validation.HasError" Value="True">
                            <Setter Property="BorderBrush" Value="Red"/>
                            <Setter Property="ToolTip"
                                    Value="{Binding RelativeSource={RelativeSource Self}, Path=(Validation.Errors)[0].ErrorContent}"/>
                        </Trigger>
                    </Style.Triggers>
                </Style>
            </TextBox.Style>
        </TextBox>
    </DataTemplate>

    <!-- float 类型：单精度浮点数输入控件，双向绑定到 Pin.Value -->
    <DataTemplate x:Key="DefaultPinFloatInputTemplate">
        <TextBox MinWidth="70"
                 VerticalAlignment="Center">
            <TextBox.Text>
                <Binding Path="Value" Mode="TwoWay" UpdateSourceTrigger="PropertyChanged">
                    <Binding.ValidationRules>
                        <validationRules:FloatValidationRule />
                    </Binding.ValidationRules>
                </Binding>
            </TextBox.Text>
            <TextBox.Style>
                <Style TargetType="TextBox">
                    <Style.Triggers>
                        <Trigger Property="Validation.HasError" Value="True">
                            <Setter Property="BorderBrush" Value="Red"/>
                            <Setter Property="ToolTip"
                                    Value="{Binding RelativeSource={RelativeSource Self}, Path=(Validation.Errors)[0].ErrorContent}"/>
                        </Trigger>
                    </Style.Triggers>
                </Style>
            </TextBox.Style>
        </TextBox>
    </DataTemplate>

    <!-- double 类型：双精度浮点数输入控件，双向绑定到 Pin.Value -->
    <DataTemplate x:Key="DefaultPinDoubleInputTemplate">
        <TextBox MinWidth="70"
                 VerticalAlignment="Center">
            <TextBox.Text>
                <Binding Path="Value" Mode="TwoWay" UpdateSourceTrigger="PropertyChanged">
                    <Binding.ValidationRules>
                        <validationRules:DoubleValidationRule />
                    </Binding.ValidationRules>
                </Binding>
            </TextBox.Text>
            <TextBox.Style>
                <Style TargetType="TextBox">
                    <Style.Triggers>
                        <Trigger Property="Validation.HasError" Value="True">
                            <Setter Property="BorderBrush" Value="Red"/>
                            <Setter Property="ToolTip"
                                    Value="{Binding RelativeSource={RelativeSource Self}, Path=(Validation.Errors)[0].ErrorContent}"/>
                        </Trigger>
                    </Style.Triggers>
                </Style>
            </TextBox.Style>
        </TextBox>
    </DataTemplate>

    <!-- decimal 类型：高精度浮点数输入控件，双向绑定到 Pin.Value -->
    <DataTemplate x:Key="DefaultPinDecimalInputTemplate">
        <TextBox MinWidth="70"
                 VerticalAlignment="Center">
            <TextBox.Text>
                <Binding Path="Value" Mode="TwoWay" UpdateSourceTrigger="PropertyChanged">
                    <Binding.ValidationRules>
                        <validationRules:DecimalValidationRule />
                    </Binding.ValidationRules>
                </Binding>
            </TextBox.Text>
            <TextBox.Style>
                <Style TargetType="TextBox">
                    <Style.Triggers>
                        <Trigger Property="Validation.HasError" Value="True">
                            <Setter Property="BorderBrush" Value="Red"/>
                            <Setter Property="ToolTip"
                                    Value="{Binding RelativeSource={RelativeSource Self}, Path=(Validation.Errors)[0].ErrorContent}"/>
                        </Trigger>
                    </Style.Triggers>
                </Style>
            </TextBox.Style>
        </TextBox>
    </DataTemplate>

    <!-- bool 类型：复选框控件，双向绑定到 Pin.Value -->
    <DataTemplate x:Key="DefaultPinBoolInputTemplate">
        <CheckBox IsChecked="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                  VerticalAlignment="Center"
                  HorizontalAlignment="Left" />
    </DataTemplate>

    <!-- DateTime 类型：日期选择控件，双向绑定到 Pin.Value -->
    <DataTemplate x:Key="DefaultPinDateTimeInputTemplate">
        <DatePicker SelectedDate="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                    MinWidth="100"
                    VerticalAlignment="Center" />
    </DataTemplate>

    <!-- enum 类型：下拉列表控件，动态填充枚举值，双向绑定到 Pin.Value -->
    <DataTemplate x:Key="DefaultPinEnumInputTemplate">
        <ComboBox SelectedValue="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                  MinWidth="80"
                  VerticalAlignment="Center">
            <ComboBox.ItemsSource>
                <Binding Path="DataType" Converter="{StaticResource EnumValuesConverter}" />
            </ComboBox.ItemsSource>
        </ComboBox>
    </DataTemplate>

</ResourceDictionary>

